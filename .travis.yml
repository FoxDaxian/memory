branches:
    only:
        - master
language: node_js
node_js:
    - '8'
cache:
    directories:
        - node_modules
before_install:
    - openssl aes-256-cbc -K $encrypted_5d973c246188_key -iv $encrypted_5d973c246188_iv
      -in deploy_rsa.enc -out ~/.ssh_travis/deploy_rsa -d
    - chmod 600 ~/.ssh/deploy_rsa
    - eval "$(ssh-agent -s)"
    - ssh-add ~/.ssh/deploy_rsa
    - git config --global user.name "FoxDaxian"
    - git config --global user.email "945039036@qq.com"
    - sh install.sh
install:
    - cd ./blog
    - npm install
script:
    - cd ./blog
    - hexo clean
    - hexo generate
    - cd ./public
    - ls -l
    - git init
    - git config --global user.name "FoxDaxian"
    - git config --global user.email "945039036@qq.com"
    - git add .
    - git commit -m "Update docs"
    - git push -f "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
    - echo '完成'
