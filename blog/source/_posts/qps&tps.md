---
title:  qps 和 tps
tags: backend
categories: 概念介绍
---

### 几个概念

- 吞吐率(RPS)
    计算公式: 吞吐率 = 总请求数 / 处理这些请求的总完成时间
- 最大吞吐率(QPS)
    计算公式: qps = 请求查询数 / 秒
    每秒查询率QPS是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准
- 并发连接数
    就是服务器某个时刻所接受的所有请求数目
- 并发用户数
    一个用户可能产生多个回话，所以并发用户数和并发连接数并不重复，并发用户数是指服务器某个时刻所能接受的用户数（类似uv）
- TPS(每秒传输的事物数)
    TPS也就是单位时间内，服务器能处理的最大事务数
    一个事务是指一个客户机想服务器发送请求，然后服务器做出反应并进行响应的过程


### 概念浅析
- QPS: Queries Per Second，意思是 每秒查询率，是一台服务器每秒能够响应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。
- TPS: Transactions Per Second的缩写，也就是事物数/每秒，这个完整的事务包括了用户请求服务器、服务器内部处理、服务器返回信息给用户三个过程。它是软件测试结果的衡量单位，一个事务是指一个客户端，想服务器发送请求，然后服务器做出反应的过程。客户端发送请求时开始计时，收到服务器响应后，结束计时，以此来计算使用的时间和完成的事务个数，最终利用这些信息来估计得分。

### 计算QPS
- 原理：每天80%的访问集中在20%的时间里，这20%的时间叫做峰值时间。
- 公式: (总pv数 * 80%) / (每天秒数 * 20%) = 峰值时间每秒请求数(QPS)
- 机器：峰值时间每秒QPS / 单台机器的QPS = 需要的机器数量
    问： 每天300w PV 的单台机器上，这台机器需要多少QPS
    答： (3000000 * 0.8) / ( 86400 * 0.2) = 139(QPS) 至少需要 139 QPS
    问： 如果一台机器的QPS是58，需要几台机器支持
    答： 139 / 58 = 3 至少三台



[如何对node进行评测、压测](https://juejin.im/post/5b827cbbe51d4538c021f2da)